;
; LAB1_4.asm
;
; Created: 20/03/2023 10:34:49 SA
; Author : Admin
;


; Replace with your application code
.EQU	OUTPUT_DDR	=	DDRA
.EQU	OUTPUT_PORT	=	PORTA
.EQU	OUTPUT_PIN	=	PINA

.EQU	INPUT_DDR	=	DDRB
.EQU	INPUT_PORT	=	PORTB
.EQU	INPUT_PIN	=	PINB


LDI		R16,			0X00
OUT		INPUT_DDR,		R16
LDI		R16,			0XFF
OUT		INPUT_PORT,		R16

LDI		R16,			0XFF
OUT		OUTPUT_DDR,		R16
; DOC TRANG THAI INPUT
LOOP: 
IN		R16,			INPUT_PIN	; R16 = $01
COM		R16
MOV		R17,			R16		;R17 = R16

ANDI	R16,			$F0		
SWAP	R16				; R16 = 4 BIT CAO
MOV		R18,			R16		
RCALL	EXTEND
MOV		R16,			R18

ANDI	R17,			$0F		; R17 = 4 BIT THAP
MOV		R18,			R17
RCALL	EXTEND
MOV		R17,			R18

MULS	R16,			R17		; R1:R0 = R16*R17
OUT		OUTPUT_PORT,	R0

RJMP	LOOP

EXTEND:
SBRS	R18,			3
RET
ORI		R18,			0xF0
RET
